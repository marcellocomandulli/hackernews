document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("news-container"),t=document.getElementById("load-more-btn");let n=0,o=[];async function r(){try{if(0===o.length){const e=await fetch("https://hacker-news.firebaseio.com/v0/newstories.json");if(!e.ok)throw new Error("Errore nel recupero degli ID delle storie");o=await e.json()}const r=o.slice(n,n+10).map((async e=>{const t=await fetch(`https://hacker-news.firebaseio.com/v0/item/${e}.json`);if(!t.ok)throw new Error(`Errore nel recupero della storia con ID ${e}`);return t.json()}));(await Promise.all(r)).forEach((t=>{var n;t&&t.title&&t.url&&t.time&&function(t,n,o){const r=document.createElement("div");r.className="news-item";const a=document.createElement("a");a.href=n,a.target="_blank",a.textContent=t;const i=document.createElement("div");i.className="date",i.textContent=`Pubblicato il: ${o}`,r.appendChild(a),r.appendChild(i),e.appendChild(r)}(t.title,t.url,(n=t.time,new Date(1e3*n).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})))})),n+=10,n>=o.length&&(t.style.display="none")}catch(t){console.error("Errore:",t);const n=document.createElement("div");n.className="error-message",n.textContent="Si è verificato un errore nel caricamento delle notizie. Riprova più tardi.",e.appendChild(n)}}r(),t.addEventListener("click",r)}));